@using QuanLySuaChua_BaoHanh.Models
@model PhieuSuaChua

<div class="card repair-order-card mb-4">
    <div class="card-body p-0">
        <!-- Phần trạng thái -->
        <div class="status-section">
            <div class="status-header">
                <div class="order-id">
                    <svg class="order-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M1 0 0 1l2.2 3.081a1 1 0 0 0 .815.419h.07a1 1 0 0 1 .708.293l2.675 2.675-2.617 2.654A3.003 3.003 0 0 0 0 13a3 3 0 1 0 5.878-.851l2.654-2.617.968.968-.305.914a1 1 0 0 0 .242 1.023l3.27 3.27a.997.997 0 0 0 1.414 0l1.586-1.586a.997.997 0 0 0 0-1.414l-3.27-3.27a1 1 0 0 0-1.023-.242L10.5 9.5l-.96-.96 2.68-2.643A3.005 3.005 0 0 0 16 3c0-.269-.035-.53-.102-.777l-2.14 2.141L12 4l-.364-1.757L13.777.102a3 3 0 0 0-3.675 3.68L7.462 6.46 4.793 3.793a1 1 0 0 1-.293-.707v-.071a1 1 0 0 0-.419-.814L1 0zm9.646 10.646a.5.5 0 0 1 .708 0l2.914 2.915a.5.5 0 0 1-.707.707l-2.915-2.914a.5.5 0 0 1 0-.708zM3 11l.471.242.529.026.287.445.445.287.026.529L5 13l-.242.471-.026.529-.445.287-.287.445-.529.026L3 15l-.471-.242L2 14.732l-.287-.445L1.268 14l-.026-.529L1 13l.242-.471.026-.529.445-.287.287-.445.529-.026L3 11z"/>
                    </svg>
                    #@Model.PhieuSuaChuaId
                </div>
                
                <span class="status-badge @(Model.TrangThai switch {
                    "ChoXacNhan" => "status-waiting",
                    "DaTiepNhan" => "status-received",
                    "DangSuaChua" => "status-repairing",
                    "HoanThanh" => "status-completed",
                    "DaHuy" => "status-cancelled",
                    _ => "status-default"
                })">
                    @switch (Model.TrangThai)
                    {
                        case "ChoXacNhan":
                            <svg class="status-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/>
                                <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/>
                            </svg>
                            <span>Chờ xác nhận</span>
                            break;
                        case "DaTiepNhan":
                            <svg class="status-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                            </svg>
                            <span>Đã tiếp nhận</span>
                            break;
                        case "DangSuaChua":
                            <svg class="status-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M11.5 2a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm-9.05 3.636a2 2 0 0 1 2.828 0l.144.144.742-.742a3 3 0 0 1 4.243 0l2.121 2.121a1 1 0 0 1-1.414 1.414l-2.121-2.121a1 1 0 0 0-1.414 0l-.742.742.147.146a2 2 0 1 1-2.828 0A3 3 0 0 1 10 3.969L12.031 6 11 7.031l-2.121-2.121a1 1 0 0 0-1.414 0L5.051 7.051a1 1 0 0 1-1.832-.748 2 2 0 0 1 .832-.664l4.945-2.613A3 3 0 0 0 8.88 2h.17a3 3 0 0 1 2.113.88l.1.1a1.99 1.99 0 0 1 .247.294 1 1 0 1 1-1.552 1.262 3.018 3.018 0 0 0-.363-.396l-1.131 1.131A1 1 0 0 1 9 6a1 1 0 0 1 .555.168l1.384-1.028a3 3 0 0 1 4.579 2.284 5.027 5.027 0 0 1-1.779 4.5l-1.9 1.773a1 1 0 1 1-1.366-1.463l1.9-1.773a3.026 3.026 0 0 0 1.078-2.533 1 1 0 0 0-1.527-.855L10 8l.478 2.874A1 1 0 0 1 9.1 12h-.17a3 3 0 0 1-2.112-.879l-.1-.099a1.982 1.982 0 0 1-.247-.295 1 1 0 1 1 1.551-1.262 3.016 3.016 0 0 0 .363.396l1.132-1.132A1 1 0 0 1 7 7.5a1 1 0 0 1-.555-.168L5.062 8.36a3 3 0 0 1-4.58-2.284 5.026 5.026 0 0 1 1.78-4.5l1.899-1.772a1 1 0 1 1 1.366 1.463l-1.9 1.773a3.026 3.026 0 0 0-1.078 2.533 1 1 0 0 0 1.527.855l1.023-.76L5 3l2.45 2.45z"/>
                            </svg>
                            <span>Đang sửa chữa</span>
                            break;
                        case "HoanThanh":
                            <svg class="status-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M12.354 4.354a.5.5 0 0 0-.708-.708L5 10.293 1.854 7.146a.5.5 0 1 0-.708.708l3.5 3.5a.5.5 0 0 0 .708 0l7-7zm-4.208 7-.896-.897.707-.707.543.543 6.646-6.647a.5.5 0 0 1 .708.708l-7 7a.5.5 0 0 1-.708 0z"/>
                                <path d="m5.354 7.146.896.897-.707.707-.897-.896a.5.5 0 1 1 .708-.708z"/>
                            </svg>
                            <span>Hoàn thành</span>
                            break;
                        case "DaHuy":
                            <svg class="status-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"/>
                            </svg>
                            <span>Đã hủy</span>
                            break;
                        default:
                            <svg class="status-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
                                <path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"/>
                            </svg>
                            <span>Không xác định</span>
                            break;
                    }
                </span>
            </div>
            
            <!-- Phần thông tin cơ bản -->
            <div class="basic-info">
                <div class="info-row">
                    @if (Model.NgayGui != null)
                    {
                        <div class="date-created">
                            <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M14 0H2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM1 3.857C1 3.384 1.448 3 2 3h12c.552 0 1 .384 1 .857v10.286c0 .473-.448.857-1 .857H2c-.552 0-1-.384-1-.857V3.857z"/>
                                <path d="M6.5 7a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-9 3a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm3 0a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                            </svg>
                            <span>@Model.NgayGui.ToString("dd/MM/yyyy")</span>
                        </div>
                    }
                    
                    @if (Model.TongTien.HasValue)
                    {
                        <div class="total-price">
                            <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M4 10.781c.148 1.667 1.513 2.85 3.591 3.003V15h1.043v-1.216c2.27-.179 3.678-1.438 3.678-3.3 0-1.59-.947-2.51-2.956-3.028l-.722-.187V3.467c1.122.11 1.879.714 2.07 1.616h1.47c-.166-1.6-1.54-2.748-3.54-2.875V1H7.591v1.233c-1.939.23-3.27 1.472-3.27 3.156 0 1.454.966 2.483 2.661 2.917l.61.162v4.031c-1.149-.17-1.94-.8-2.131-1.718H4zm3.391-3.836c-1.043-.263-1.6-.825-1.6-1.616 0-.944.704-1.641 1.8-1.828v3.495l-.2-.05zm1.591 1.872c1.287.323 1.852.859 1.852 1.769 0 1.097-.826 1.828-2.2 1.939V8.73l.348.086z"/>
                            </svg>
                            <span>@Model.TongTien.Value.ToString("N0") VNĐ</span>
                        </div>
                    }
                    
                    <div class="product-count">
                        <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M8.186 1.113a.5.5 0 0 0-.372 0L1.846 3.5l2.404.961L10.404 2l-2.218-.887zm3.564 1.426L5.596 5 8 5.961 14.154 3.5l-2.404-.961zm3.25 1.7-6.5 2.6v7.922l6.5-2.6V4.24zM7.5 14.762V6.838L1 4.239v7.923l6.5 2.6zM7.443.184a1.5 1.5 0 0 1 1.114 0l7.129 2.852A.5.5 0 0 1 16 3.5v8.662a1 1 0 0 1-.629.928l-7.185 2.874a.5.5 0 0 1-.372 0L.63 13.09a1 1 0 0 1-.63-.928V3.5a.5.5 0 0 1 .314-.464L7.443.184z"/>
                        </svg>
                        <span>@Model.ChiTietSuaChuas.Count sản phẩm</span>
                    </div>
                </div>
                
                <!-- Action buttons -->
                <div class="action-buttons">
                    <a href="/KhachHang/DonSuaChua/ChiTiet/@Model.PhieuSuaChuaId" class="btn btn-details">
                        <svg class="me-1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                            <path d="M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0z"/>
                            <path d="M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8zm8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7z"/>
                        </svg>
                        Xem chi tiết
                    </a>
                    
                    @if (Model.TrangThai == "ChoXacNhan")
                    {
                        <button class="btn btn-cancel cancel-order" data-id="@Model.PhieuSuaChuaId">
                            <svg class="me-1" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"/>
                            </svg>
                            Hủy đơn
                        </button>
                    }
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .repair-order-card {
        border: none;
        border-radius: 16px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.07);
        transition: all 0.3s ease;
        background-color: #fff;
        overflow: hidden;
        margin-bottom: 1.5rem;
    }

    .repair-order-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.1);
    }

    /* Status Section Styles */
    .status-section {
        width: 100%;
        background: linear-gradient(145deg, #f8f9fa 0%, #ffffff 100%);
        padding: 1.5rem;
        border-radius: 16px;
    }

    .status-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.25rem;
    }

    .order-id {
        font-size: 1.3rem;
        font-weight: 700;
        color: #2c3e50;
        letter-spacing: 0.5px;
        text-shadow: 0px 1px 1px rgba(255,255,255,0.8);
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .order-icon {
        color: #3498db;
        width: 20px;
        height: 20px;
    }
    
    .basic-info {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 1rem;
        margin-top: 1rem;
    }
    
    .info-row {
        display: flex;
        flex-wrap: wrap;
        gap: 1.5rem;
        align-items: center;
    }    .status-badge {
        padding: 0.6rem 1.2rem;
        border-radius: 30px;
        font-size: 0.95rem;
        font-weight: 600;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        box-shadow: 0 3px 6px rgba(0,0,0,0.08);
        letter-spacing: 0.3px;
    }

    .status-icon {
        width: 16px;
        height: 16px;
    }

    .date-created, .total-price, .product-count {
        font-size: 0.95rem;
        color: #6c757d;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    
    .icon {
        color: #3498db;
    }/* Details Section Styles */
    .details-section {
        flex: 1;
        padding: 1.75rem;
        overflow: hidden;
        background-color: #fff;
    }

    .details-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 1.75rem;
    }

    /* Status Colors */
    .status-waiting {
        background: linear-gradient(145deg, #fff6e6, #ffe5cc);
        color: #d35400;
    }

    .status-received {
        background: linear-gradient(145deg, #e0f7fa, #b2ebf2);
        color: #00838f;
    }

    .status-repairing {
        background: linear-gradient(145deg, #e3f2fd, #bbdefb);
        color: #1565c0;
    }

    .status-completed {
        background: linear-gradient(145deg, #e8f5e9, #c8e6c9);
        color: #2e7d32;
    }

    .status-cancelled {
        background: linear-gradient(145deg, #ffebee, #ffcdd2);
        color: #b71c1c;
    }

    .status-default {
        background: linear-gradient(145deg, #f5f5f5, #eeeeee);
        color: #616161;
    }

    /* Info Section Styles */
    .info-section {
        display: flex;
        gap: 1.2rem;
        padding: 1.2rem;
        background: #f8f9fa;
        border-radius: 12px;
        transition: all 0.3s ease;
        box-shadow: 0 2px 8px rgba(0,0,0,0.03);
    }

    .info-section:hover {
        background: #f1f3f5;
        box-shadow: 0 4px 12px rgba(0,0,0,0.06);
        transform: translateY(-2px);
    }

    .note-section {
        background: #fff8e1;
    }

    .note-section:hover {
        background: #ffecb3;
    }

    .info-icon {
        flex-shrink: 0;
        width: 42px;
        height: 42px;
        background: white;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 3px 6px rgba(0,0,0,0.08);
    }

    .info-icon i {
        color: #3498db;
        font-size: 1.2rem;
    }

    .note-section .info-icon i {
        color: #ff9800;
    }

    .info-content {
        flex-grow: 1;
    }

    .info-title {
        color: #6c757d;
        font-size: 1rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
        letter-spacing: 0.3px;
    }

    .product-list {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .product-list li {
        display: flex;
        align-items: center;
        color: #2c3e50;
        margin-bottom: 0.4rem;
        font-size: 1rem;
    }

    .product-list li i {
        color: #3498db;
        font-size: 0.85rem;
    }

    .product-name {
        font-weight: 500;
    }

    .description-text, .note-text {
        color: #34495e;
        line-height: 1.6;
        font-size: 0.98rem;
    }

    .note-text {
        color: #795548;
        font-style: italic;
    }    .total-price {
        font-weight: 600;
        color: #2c3e50;
        white-space: nowrap;
    }
    
    .action-buttons {
        display: flex;
        gap: 1rem;
        margin-left: auto;
        flex-wrap: wrap;
    }
    
  

    .btn-cancel {
        background-color: #fff;
        color: #e74c3c;
        border: 1.5px solid #e74c3c;
        padding: 0.6rem 1.5rem;
        border-radius: 10px;
        font-size: 0.95rem;
        font-weight: 600;
        transition: all 0.3s ease;
        letter-spacing: 0.3px;
        white-space: nowrap;
        display: flex;
        align-items: center;
    }

    .btn-cancel:hover {
        background-color: #e74c3c;
        color: #fff;
        box-shadow: 0 4px 10px rgba(231, 76, 60, 0.2);
    }
    
    .btn-details {
        background-color: #fff;
        color: #3498db;
        border: 1.5px solid #3498db;
        padding: 0.6rem 1.5rem;
        border-radius: 10px;
        font-size: 0.95rem;
        font-weight: 600;
        transition: all 0.3s ease;
        letter-spacing: 0.3px;
        white-space: nowrap;
        text-decoration: none;
        display: flex;
        align-items: center;
    }
    
    .btn-details:hover {
        background-color: #3498db;
        color: #fff;
        box-shadow: 0 4px 10px rgba(52, 152, 219, 0.2);
    }
    
    </style>
